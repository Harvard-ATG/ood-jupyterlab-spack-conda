# Job submission configuration file
#
---

<%-
if custom_num_gpus.blank?
  gpuArg = ""
else
  gpuArg = "- \"--gpus-per-node=#{custom_num_gpus.to_i}\""
end
-%>

#
# Configure the content of the job script for the batch job here
# @see http://www.rubydoc.info/gems/ood_core/OodCore/BatchConnect/Template
#
batch_connect:
  template: "basic"

#
# Configure the job script submission parameters for the batch job here
# @see http://www.rubydoc.info/gems/ood_core/OodCore/Job/Script
#
script:
  native:
    - "--nodes=1"
    - "--cpus-per-task=<%= custom_num_cores.blank? ? 1 : custom_num_cores.to_i %>"
    <%= gpuArg.to_s %>
